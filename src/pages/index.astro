---
import Layout from '../layouts/Layout.astro';
import '../styles/variables.css';
import Aboutme from '../components/index/Aboutme.astro';
import VoirPlus from '../components/index/VoirPlus.astro';
import SingleFilmSection from '../components/films/SingleFilmSection.astro';
import PlaceholderImage from '../assets/placeholder.webp';

import { displayedFilms } from "../model.ts";
import {formatAfficheUrlByAfficheUrl, formatVideoUrlByUrl} from "../utils/googleDriveUrlFormatter.ts";
const selectedFilmIds = [4, 1, 3, 6];
const selectedFilms = selectedFilmIds.map(id =>
    displayedFilms.find(film => film.id === id)!
);

const singleCatalogueTextColor = 'var(--light-singleCatalogueColor)';
const singleCatalogueBackgroundColor = 'var(--light-singleCatalogueBackgroundColor)';
const singleCatalogueBorderColor = 'var(--light-singleCatalogueBorderColor)';
const altSingleCatalogueTextColor = 'var(--light-alt-singleCatalogueColor)';
const altSingleCatalogueBackgroundColor = 'var(--light-alt-singleCatalogueBackgroundColor)';
const altSingleCatalogueBorderColor = 'var(--light-alt-singleCatalogueBorderColor)';
---

<Layout>
	<Aboutme />
    {selectedFilms.map((film, index) => (
            <SingleFilmSection
                    title={ film.titre || "Aucun titre."}
                    afficheUrl={ formatAfficheUrlByAfficheUrl(film.afficheUrl) || PlaceholderImage.src}
                    description={ film.description || "Aucune description." }
                    videoUrl={ formatVideoUrlByUrl(film.videoUrl) }
                    assetsLoad={index === 0 ? "eager" : "lazy"}
                    filmSide={index % 2 === 0 ? "right" : "left"}
                    backgroundColor={index % 2 === 0 ? altSingleCatalogueBackgroundColor : singleCatalogueBackgroundColor}
                    textColor={index % 2 === 0 ? altSingleCatalogueTextColor : singleCatalogueTextColor}
                    borderColor={index % 2 === 0 ? altSingleCatalogueBorderColor : singleCatalogueBorderColor}
            />
    ))}
    <VoirPlus />
</Layout>
